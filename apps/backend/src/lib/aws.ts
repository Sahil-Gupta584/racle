import * as AWS from "aws-sdk";
import fs from "fs";
const s3 = new AWS.S3({
  accessKeyId: "b9b3ba420347e8dfdd95ecd1ae4a3bee",
  secretAccessKey:
    "c4adc28ffda753a229313f7409f4b13a4ee0c7d9e5615b6173d9a5f2161fee9e",
  endpoint: "https://9cbb77df0015305d4bbb52f4c0442104.r2.cloudflarestorage.com",
});
const bucketName = "racle";

export async function uploadFileToS3(fileName: string, localFilePath: string) {
  try {
    const fileContent = fs.readFileSync(localFilePath);
    await s3
      .upload({
        Bucket: bucketName,
        Key: fileName.replaceAll(`\\`, "/"),
        Body: fileContent,
      })
      .promise();
  } catch (error) {
    console.error(error);
  }
}
export async function getS3Object(key: string) {
  try {
    return await s3
      .getObject({
        Bucket: bucketName,
        Key: key,
      })
      .promise();
  } catch (error) {
    console.error(error, "for key", key);
  }
  // return file.Body;
}

export async function getContent(id: string, filePath: string) {
  return await s3
    .getObject({
      Bucket: "vercel",
      Key: `dist/${id}${filePath}`,
    })
    .promise();
}
const a = {
  AcceptRanges: "bytes",
  LastModified: "2025-07-07T15:48:32.000Z",
  ContentLength: 1497,
  ETag: '"8e3a10e157f75ada21ab742c022d5430"',
  ContentType: "application/octet-stream",
  Metadata: {},
  Body: {
    type: "Buffer",
    data: [
      60, 115, 118, 103, 32, 120, 109, 108, 110, 115, 61, 34, 104, 116, 116,
      112, 58, 47, 47, 119, 119, 119, 46, 119, 51, 46, 111, 114, 103, 47, 50,
      48, 48, 48, 47, 115, 118, 103, 34, 32, 120, 109, 108, 110, 115, 58, 120,
      108, 105, 110, 107, 61, 34, 104, 116, 116, 112, 58, 47, 47, 119, 119, 119,
      46, 119, 51, 46, 111, 114, 103, 47, 49, 57, 57, 57, 47, 120, 108, 105,
      110, 107, 34, 32, 97, 114, 105, 97, 45, 104, 105, 100, 100, 101, 110, 61,
      34, 116, 114, 117, 101, 34, 32, 114, 111, 108, 101, 61, 34, 105, 109, 103,
      34, 32, 99, 108, 97, 115, 115, 61, 34, 105, 99, 111, 110, 105, 102, 121,
      32, 105, 99, 111, 110, 105, 102, 121, 45, 45, 108, 111, 103, 111, 115, 34,
      32, 119, 105, 100, 116, 104, 61, 34, 51, 49, 46, 56, 56, 34, 32, 104, 101,
      105, 103, 104, 116, 61, 34, 51, 50, 34, 32, 112, 114, 101, 115, 101, 114,
      118, 101, 65, 115, 112, 101, 99, 116, 82, 97, 116, 105, 111, 61, 34, 120,
      77, 105, 100, 89, 77, 105, 100, 32, 109, 101, 101, 116, 34, 32, 118, 105,
      101, 119, 66, 111, 120, 61, 34, 48, 32, 48, 32, 50, 53, 54, 32, 50, 53,
      55, 34, 62, 60, 100, 101, 102, 115, 62, 60, 108, 105, 110, 101, 97, 114,
      71, 114, 97, 100, 105, 101, 110, 116, 32, 105, 100, 61, 34, 73, 99, 111,
      110, 105, 102, 121, 73, 100, 49, 56, 49, 51, 48, 56, 56, 102, 101, 49,
      102, 98, 99, 48, 49, 102, 98, 52, 54, 54, 34, 32, 120, 49, 61, 34, 45, 46,
      56, 50, 56, 37, 34, 32, 120, 50, 61, 34, 53, 55, 46, 54, 51, 54, 37, 34,
      32, 121, 49, 61, 34, 55, 46, 54, 53, 50, 37, 34, 32, 121, 50, 61, 34, 55,
      56, 46, 52, 49, 49, 37, 34, 62, 60, 115, 116, 111, 112, 32, 111, 102, 102,
      115, 101, 116, 61, 34, 48, 37, 34, 32, 115, 116, 111, 112, 45, 99, 111,
      108, 111, 114, 61, 34, 35, 52, 49, 68, 49, 70, 70, 34, 62, 60, 47, 115,
      116, 111, 112, 62, 60, 115, 116, 111, 112, 32, 111, 102, 102, 115, 101,
      116, 61, 34, 49, 48, 48, 37, 34, 32, 115, 116, 111, 112, 45, 99, 111, 108,
      111, 114, 61, 34, 35, 66, 68, 51, 52, 70, 69, 34, 62, 60, 47, 115, 116,
      111, 112, 62, 60, 47, 108, 105, 110, 101, 97, 114, 71, 114, 97, 100, 105,
      101, 110, 116, 62, 60, 108, 105, 110, 101, 97, 114, 71, 114, 97, 100, 105,
      101, 110, 116, 32, 105, 100, 61, 34, 73, 99, 111, 110, 105, 102, 121, 73,
      100, 49, 56, 49, 51, 48, 56, 56, 102, 101, 49, 102, 98, 99, 48, 49, 102,
      98, 52, 54, 55, 34, 32, 120, 49, 61, 34, 52, 51, 46, 51, 55, 54, 37, 34,
      32, 120, 50, 61, 34, 53, 48, 46, 51, 49, 54, 37, 34, 32, 121, 49, 61, 34,
      50, 46, 50, 52, 50, 37, 34, 32, 121, 50, 61, 34, 56, 57, 46, 48, 51, 37,
      34, 62, 60, 115, 116, 111, 112, 32, 111, 102, 102, 115, 101, 116, 61, 34,
      48, 37, 34, 32, 115, 116, 111, 112, 45, 99, 111, 108, 111, 114, 61, 34,
      35, 70, 70, 69, 65, 56, 51, 34, 62, 60, 47, 115, 116, 111, 112, 62, 60,
      115, 116, 111, 112, 32, 111, 102, 102, 115, 101, 116, 61, 34, 56, 46, 51,
      51, 51, 37, 34, 32, 115, 116, 111, 112, 45, 99, 111, 108, 111, 114, 61,
      34, 35, 70, 70, 68, 68, 51, 53, 34, 62, 60, 47, 115, 116, 111, 112, 62,
      60, 115, 116, 111, 112, 32, 111, 102, 102, 115, 101, 116, 61, 34, 49, 48,
      48, 37, 34, 32, 115, 116, 111, 112, 45, 99, 111, 108, 111, 114, 61, 34,
      35, 70, 70, 65, 56, 48, 48, 34, 62, 60, 47, 115, 116, 111, 112, 62, 60,
      47, 108, 105, 110, 101, 97, 114, 71, 114, 97, 100, 105, 101, 110, 116, 62,
      60, 47, 100, 101, 102, 115, 62, 60, 112, 97, 116, 104, 32, 102, 105, 108,
      108, 61, 34, 117, 114, 108, 40, 35, 73, 99, 111, 110, 105, 102, 121, 73,
      100, 49, 56, 49, 51, 48, 56, 56, 102, 101, 49, 102, 98, 99, 48, 49, 102,
      98, 52, 54, 54, 41, 34, 32, 100, 61, 34, 77, 50, 53, 53, 46, 49, 53, 51,
      32, 51, 55, 46, 57, 51, 56, 76, 49, 51, 52, 46, 56, 57, 55, 32, 50, 53,
      50, 46, 57, 55, 54, 99, 45, 50, 46, 52, 56, 51, 32, 52, 46, 52, 52, 45,
      56, 46, 56, 54, 50, 32, 52, 46, 52, 54, 54, 45, 49, 49, 46, 51, 56, 50,
      46, 48, 52, 56, 76, 46, 56, 55, 53, 32, 51, 55, 46, 57, 53, 56, 99, 45,
      50, 46, 55, 52, 54, 45, 52, 46, 56, 49, 52, 32, 49, 46, 51, 55, 49, 45,
      49, 48, 46, 54, 52, 54, 32, 54, 46, 56, 50, 55, 45, 57, 46, 54, 55, 108,
      49, 50, 48, 46, 51, 56, 53, 32, 50, 49, 46, 53, 49, 55, 97, 54, 46, 53,
      51, 55, 32, 54, 46, 53, 51, 55, 32, 48, 32, 48, 32, 48, 32, 50, 46, 51,
      50, 50, 45, 46, 48, 48, 52, 108, 49, 49, 55, 46, 56, 54, 55, 45, 50, 49,
      46, 52, 56, 51, 99, 53, 46, 52, 51, 56, 45, 46, 57, 57, 49, 32, 57, 46,
      53, 55, 52, 32, 52, 46, 55, 57, 54, 32, 54, 46, 56, 55, 55, 32, 57, 46,
      54, 50, 90, 34, 62, 60, 47, 112, 97, 116, 104, 62, 60, 112, 97, 116, 104,
      32, 102, 105, 108, 108, 61, 34, 117, 114, 108, 40, 35, 73, 99, 111, 110,
      105, 102, 121, 73, 100, 49, 56, 49, 51, 48, 56, 56, 102, 101, 49, 102, 98,
      99, 48, 49, 102, 98, 52, 54, 55, 41, 34, 32, 100, 61, 34, 77, 49, 56, 53,
      46, 52, 51, 50, 46, 48, 54, 51, 76, 57, 54, 46, 52, 52, 32, 49, 55, 46,
      53, 48, 49, 97, 51, 46, 50, 54, 56, 32, 51, 46, 50, 54, 56, 32, 48, 32,
      48, 32, 48, 45, 50, 46, 54, 51, 52, 32, 51, 46, 48, 49, 52, 108, 45, 53,
      46, 52, 55, 52, 32, 57, 50, 46, 52, 53, 54, 97, 51, 46, 50, 54, 56, 32,
      51, 46, 50, 54, 56, 32, 48, 32, 48, 32, 48, 32, 51, 46, 57, 57, 55, 32,
      51, 46, 51, 55, 56, 108, 50, 52, 46, 55, 55, 55, 45, 53, 46, 55, 49, 56,
      99, 50, 46, 51, 49, 56, 45, 46, 53, 51, 53, 32, 52, 46, 52, 49, 51, 32,
      49, 46, 53, 48, 55, 32, 51, 46, 57, 51, 54, 32, 51, 46, 56, 51, 56, 108,
      45, 55, 46, 51, 54, 49, 32, 51, 54, 46, 48, 52, 55, 99, 45, 46, 52, 57,
      53, 32, 50, 46, 52, 50, 54, 32, 49, 46, 55, 56, 50, 32, 52, 46, 53, 32,
      52, 46, 49, 53, 49, 32, 51, 46, 55, 56, 108, 49, 53, 46, 51, 48, 52, 45,
      52, 46, 54, 52, 57, 99, 50, 46, 51, 55, 50, 45, 46, 55, 50, 32, 52, 46,
      54, 53, 50, 32, 49, 46, 51, 54, 32, 52, 46, 49, 53, 32, 51, 46, 55, 56,
      56, 108, 45, 49, 49, 46, 54, 57, 56, 32, 53, 54, 46, 54, 50, 49, 99, 45,
      46, 55, 51, 50, 32, 51, 46, 53, 52, 50, 32, 51, 46, 57, 55, 57, 32, 53,
      46, 52, 55, 51, 32, 53, 46, 57, 52, 51, 32, 50, 46, 52, 51, 55, 108, 49,
      46, 51, 49, 51, 45, 50, 46, 48, 50, 56, 108, 55, 50, 46, 53, 49, 54, 45,
      49, 52, 52, 46, 55, 50, 99, 49, 46, 50, 49, 53, 45, 50, 46, 52, 50, 51,
      45, 46, 56, 56, 45, 53, 46, 49, 56, 54, 45, 51, 46, 53, 52, 45, 52, 46,
      54, 55, 50, 108, 45, 50, 53, 46, 53, 48, 53, 32, 52, 46, 57, 50, 50, 99,
      45, 50, 46, 51, 57, 54, 46, 52, 54, 50, 45, 52, 46, 52, 51, 53, 45, 49,
      46, 55, 55, 45, 51, 46, 55, 53, 57, 45, 52, 46, 49, 49, 52, 108, 49, 54,
      46, 54, 52, 54, 45, 53, 55, 46, 55, 48, 53, 99, 46, 54, 55, 55, 45, 50,
      46, 51, 53, 45, 49, 46, 51, 55, 45, 52, 46, 53, 56, 51, 45, 51, 46, 55,
      54, 57, 45, 52, 46, 49, 49, 51, 90, 34, 62, 60, 47, 112, 97, 116, 104, 62,
      60, 47, 115, 118, 103, 62,
    ],
  },
};
